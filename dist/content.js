(()=>{function e(t){return e="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},e(t)}function t(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);t&&(o=o.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,o)}return n}function n(e){for(var n=1;n<arguments.length;n++){var r=null!=arguments[n]?arguments[n]:{};n%2?t(Object(r),!0).forEach((function(t){o(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):t(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}function o(t,n,o){return(n=function(t){var n=function(t){if("object"!=e(t)||!t)return t;var n=t[Symbol.toPrimitive];if(void 0!==n){var o=n.call(t,"string");if("object"!=e(o))return o;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(t)}(t);return"symbol"==e(n)?n:n+""}(n))in t?Object.defineProperty(t,n,{value:o,enumerable:!0,configurable:!0,writable:!0}):t[n]=o,t}function r(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,o=Array(t);n<t;n++)o[n]=e[n];return o}function i(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},o=document.createElement(e);return Object.assign(o.style,t),Object.entries(n).forEach((function(e){var t,n,i=(n=2,function(e){if(Array.isArray(e))return e}(t=e)||function(e,t){var n=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=n){var o,r,i,a,c=[],d=!0,l=!1;try{if(i=(n=n.call(e)).next,0===t){if(Object(n)!==n)return;d=!1}else for(;!(d=(o=i.call(n)).done)&&(c.push(o.value),c.length!==t);d=!0);}catch(e){l=!0,r=e}finally{try{if(!d&&null!=n.return&&(a=n.return(),Object(a)!==a))return}finally{if(l)throw r}}return c}}(t,n)||function(e,t){if(e){if("string"==typeof e)return r(e,t);var n={}.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?r(e,t):void 0}}(t,n)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()),a=i[0],c=i[1];a in o?o[a]=c:o.setAttribute(a,c)})),o}var a=[],c=null;chrome.storage.local.get(["settings"],(function(e){var t=e.settings||{};if(t.hideSortNotes,!t.hideSortNotes){var o=function(){chrome.storage.local.get(["notes"],(function(e){a=e.notes||[],r(a)}))},r=function(e){b.innerHTML="",e.length?e.forEach((function(e){if(!e.deleted){var t=document.createElement("li");t.style.fontSize="14px",t.style.lineHeight="1.4",t.style.marginBottom="5px",t.style.wordWrap="break-word",t.innerHTML='\n          <div class="note-item" style="padding:10px 0;border-bottom:1px solid #6c757d;">\n            <div>\n              <div class="note-text">'.concat(e.text,'</div>\n              <span class="options" style="display:flex; justify-content:space-between; align-items:center;" data-id="').concat(e.id,'">\n                <small class="date" style="font-size:0.5rem; color:#6c757d; border:1px solid #6c757d; border-radius:12px; padding:1px 8px;">\n                  ').concat(new Date(e.date).toLocaleDateString("en-US",{year:"numeric",month:"long",day:"numeric"}),'\n                </small>\n                <div class="icons">\n                  <span class="edit-btn" data-id="').concat(e.id,'" style="cursor:pointer; margin-right:6px;">Edit</span>\n                  <span class="copy-btn" data-id="').concat(e.id,'" data-text="').concat(e.text,'" style="cursor:pointer;">Copy</span>\n                </div>\n              </span>\n            </div>\n          </div>\n        ');var n=t.querySelector(".copy-btn");n&&n.addEventListener("click",(function(){navigator.clipboard.writeText(n.dataset.text).then((function(){n.innerText="Copied!",setTimeout((function(){return n.innerText="Copy"}),1e3)}))}));var o=t.querySelector(".edit-btn");o&&o.addEventListener("click",(function(){c=e.id,x.innerHTML=e.text,h.innerText="Update Note",s.scrollTop=s.scrollHeight})),b.appendChild(t)}})):b.appendChild(i("li",{padding:"10px",textAlign:"center",color:"#666",fontStyle:"italic"},{innerText:"No notes yet"}))},d=i("button",{position:"fixed",top:"20px",right:"0px",zIndex:"9998",padding:"10px",borderRadius:"5px",border:"none",color:"white",backgroundColor:"#684993",cursor:"pointer"},{innerHTML:'<span style="margin-right: 10px;">â˜°</span>'});document.body.appendChild(d);var l=i("span",{position:"absolute",top:"-5px",width:"18px",height:"18px",backgroundColor:"white",color:"black",borderRadius:"50%",fontSize:"12px",textAlign:"center",cursor:"pointer",boxShadow:"0 0 2px rgba(0,0,0,0.3)",fontWeight:"bold",display:"none"},{innerText:"Ã—",title:"Hide"});d.appendChild(l),d.addEventListener("mouseenter",(function(){return l.style.display="block"})),d.addEventListener("mouseleave",(function(){return l.style.display="none"})),l.addEventListener("click",(function(e){e.stopPropagation(),d.style.display="none",chrome.storage.local.get(["settings"],(function(e){var t=e.settings||{};t.hideSortNotes=!0,chrome.storage.local.set({settings:t})}))}));var s=i("div",{position:"fixed",top:"0",right:"-400px",width:"300px",height:"100vh",display:"none",backgroundColor:"#fff",boxShadow:"-2px 0 8px rgba(0,0,0,0.2)",transition:"right 0.3s ease",zIndex:"9999",color:"black",padding:"20px",overflow:"hidden",fontFamily:"Arial, sans-serif"});document.body.appendChild(s);var p=i("button",{position:"absolute",top:"0px",right:"5px",fontSize:"20px",background:"none",border:"none",cursor:"pointer",color:"black"},{innerText:"Ã—"});s.appendChild(p);var u=chrome.runtime.getURL("assets/note.png"),f=document.createElement("div");f.style.marginBottom="10px",f.style.display="flex",f.style.alignItems="center",f.style.justifyContent="space-between",f.innerHTML='\n      <div class="inline">\n        <img style="height: 20px; display: inline; margin-right: 2px;" src="'.concat(u,'" />\n        <b><i style="color: #684993;">i</i>\n        <span>Notes</span></b>\n      </div>\n      <input type="text" id="notes-search" placeholder="Search notes..." \n        style="padding: 6px 8px; border-radius: 4px; font-size: 12px; flex:1; margin-left:5px;" />\n    '),s.appendChild(f);var b=i("ul",{listStyle:"none",padding:"0",margin:"0",height:"60%",overflowY:"auto"},{id:"notes-list"});s.appendChild(b);var g=i("div",{position:"absolute",bottom:"70px",left:"0",width:"100%",background:"#fff",padding:"10px",borderTop:"1px solid #ddd"}),y=i("div",{display:"flex",gap:"6px",marginBottom:"6px"});[{cmd:"bold",icon:"B"},{cmd:"italic",icon:"I"},{cmd:"underline",icon:"U"},{cmd:"insertUnorderedList",icon:"â€¢ List"},{cmd:"insertOrderedList",icon:"1. List"},{cmd:"insertHTML",icon:"</>"}].forEach((function(e){var t=i("button",{padding:"4px 6px",cursor:"pointer",border:"1px solid #ccc",background:"#f8f9fa"},{innerText:e.icon});t.addEventListener("click",(function(){"insertHTML"===e.cmd?document.execCommand("insertHTML",!1,'<code style="background:#c2c2c2;padding:3px;border-radius:3px;">'.concat(window.getSelection(),"</code>")):document.execCommand(e.cmd,!1,null)})),y.appendChild(t)})),g.appendChild(y);var x=i("div",{minHeight:"80px",border:"1px solid #ccc",padding:"6px",borderRadius:"4px",overflowY:"auto"},{contentEditable:!0,id:"note-editor"});g.appendChild(x);var h=i("button",{marginTop:"6px",padding:"6px",width:"100%",backgroundColor:"#684993",color:"white",border:"none",cursor:"pointer",borderRadius:"4px"},{innerText:"Save Note"});g.appendChild(h);var m=i("button",{marginTop:"6px",padding:"6px",width:"100%",backgroundColor:"#eee",border:"1px solid #ccc",cursor:"pointer"},{innerText:"ðŸŽ¤ Voice Input"});g.appendChild(m),s.appendChild(g);var v=i("div",{position:"absolute",bottom:"10px",left:"0",width:"100%"});v.innerHTML='\n      <hr style="margin: 10px 0;"/>\n      <div style="text-align: center; background-color: white; padding-top: 5px; height:3rem; font-size: 12px;">\n        <a href="https://github.com/arjad/chrome-notes" target="_blank" style="color: #684993; text-decoration: none;">View Source on GitHub</a>\n        <br />\n        <a href="https://github.com/arjad" target="_blank" style="color: #999; font-size: 11px;">@arjad</a>\n      </div>\n    ',s.appendChild(v);var w,S=f.querySelector("#notes-search");S.addEventListener("input",(function(){var e=S.value.toLowerCase(),t=a.filter((function(t){return!t.deleted&&t.text.toLowerCase().includes(e)}));r(t)})),h.addEventListener("click",(function(){var e=x.innerHTML.trim();e&&chrome.storage.local.get(["notes"],(function(t){var r=t.notes||[];c?(r=r.map((function(t){return t.id===c?n(n({},t),{},{text:e}):t})),c=null,h.innerText="Save Note"):r.unshift({id:Date.now(),text:e,date:(new Date).toISOString(),deleted:!1}),chrome.storage.local.set({notes:r},(function(){x.innerHTML="",o()}))}))}));var T=!1;"webkitSpeechRecognition"in window&&((w=new webkitSpeechRecognition).continuous=!0,w.onresult=function(e){var t=e.results[e.results.length-1][0].transcript;x.innerHTML+=t+" "},m.addEventListener("click",(function(){T?(w.stop(),m.innerText="ðŸŽ¤ Voice Input"):(w.start(),m.innerText="â›” Stop"),T=!T}))),d.addEventListener("click",(function(){s.style.display="block",s.style.right="0",o()})),p.addEventListener("click",(function(){s.style.right="-50rem",setTimeout((function(){s.style.display="none"}),300)}))}}))})();